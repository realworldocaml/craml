<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Craml (craml.Craml)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">craml</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Craml</span></h1></header><p>Library to handle <a href="https://bitheap.org/cram/">cram tests</a>
format.</p><div class="spec type" id="type-output"><a href="#type-output" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>output</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-output.Output" class="anchored"><td class="def constructor"><a href="#type-output.Output" class="anchor"></a><code><span class="keyword">| </span></code><code>`Output<span class="keyword"> of </span>string</code></td></tr><tr id="type-output.Ellipsis" class="anchored"><td class="def constructor"><a href="#type-output.Ellipsis" class="anchor"></a><code><span class="keyword">| </span></code><code>`Ellipsis</code></td></tr></table><code> ]</code><code></code></div><div class="doc"><p>The type for output lines.</p></div></div><div class="spec type" id="type-line"><a href="#type-line" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>line</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-line.output" class="anchored"><td class="def type"><a href="#type-line.output" class="anchor"></a><code><span class="keyword">| </span></code><code><a href="index.html#type-output">output</a></code></td></tr><tr id="type-line.Command" class="anchored"><td class="def constructor"><a href="#type-line.Command" class="anchor"></a><code><span class="keyword">| </span></code><code>`Command<span class="keyword"> of </span>string list</code></td></tr><tr id="type-line.Comment" class="anchored"><td class="def constructor"><a href="#type-line.Comment" class="anchor"></a><code><span class="keyword">| </span></code><code>`Comment<span class="keyword"> of </span>string</code></td></tr><tr id="type-line.Part" class="anchored"><td class="def constructor"><a href="#type-line.Part" class="anchor"></a><code><span class="keyword">| </span></code><code>`Part<span class="keyword"> of </span>string</code></td></tr><tr id="type-line.Non_det" class="anchored"><td class="def constructor"><a href="#type-line.Non_det" class="anchor"></a><code><span class="keyword">| </span></code><code>`Non_det<span class="keyword"> of </span>[ `Output | `Command ]</code></td></tr><tr id="type-line.Exit" class="anchored"><td class="def constructor"><a href="#type-line.Exit" class="anchor"></a><code><span class="keyword">| </span></code><code>`Exit<span class="keyword"> of </span>int</code></td></tr></table><code> ]</code><code></code></div><div class="doc"><p>The type for all lines.</p></div></div><div class="spec val" id="val-pp_command"><a href="#val-pp_command" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_command : string list Fmt.t</code></div><div class="doc"><p><code class="code">pp_command</code> display a multi-line command.</p></div></div><div class="spec val" id="val-pp_line"><a href="#val-pp_line" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_line : ?&#8288;hide:bool <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-line">line</a> Fmt.t</code></div><div class="doc"><p><code class="code">pp_line</code> is the pretty-printer for lines. If <code class="code">hide</code> is true,
commands starting by <code class="code">@@</code> are not displayed. By default, <code class="code">hide</code> is
not set (all the lines are printed).</p></div></div><div class="spec type" id="type-test"><a href="#type-test" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>test</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-test.part" class="anchored"><td class="def field"><a href="#type-test.part" class="anchor"></a><code>part : string option;</code></td></tr><tr id="type-test.non_deterministic" class="anchored"><td class="def field"><a href="#type-test.non_deterministic" class="anchor"></a><code>non_deterministic : [ `Command | `Output | `False ];</code></td></tr><tr id="type-test.command" class="anchored"><td class="def field"><a href="#type-test.command" class="anchor"></a><code>command : string list;</code></td></tr><tr id="type-test.output" class="anchored"><td class="def field"><a href="#type-test.output" class="anchor"></a><code>output : <a href="index.html#type-output">output</a> list;</code></td></tr><tr id="type-test.lines" class="anchored"><td class="def field"><a href="#type-test.lines" class="anchor"></a><code>lines : <a href="index.html#type-line">line</a> list;</code></td></tr><tr id="type-test.exit_code" class="anchored"><td class="def field"><a href="#type-test.exit_code" class="anchor"></a><code>exit_code : int;</code></td></tr></table><code>}</code><code></code></div><div class="doc"><p>The type for tests.</p></div></div><div class="spec type" id="type-item"><a href="#type-item" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>item</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-item.Test" class="anchored"><td class="def constructor"><a href="#type-item.Test" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Test</span><span class="keyword"> of </span><a href="index.html#type-test">test</a></code></td></tr><tr id="type-item.Line" class="anchored"><td class="def constructor"><a href="#type-item.Line" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Line</span><span class="keyword"> of </span><a href="index.html#type-line">line</a></code></td></tr></table><code></code></div><div class="doc"><p>The type for test items</p></div></div><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code><span class="keyword"> = </span><a href="index.html#type-item">item</a> list</code><code></code></div><div class="doc"><p>The type for cram files.</p></div></div><div class="spec val" id="val-pp"><a href="#val-pp" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp : ?&#8288;hide:bool <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> Fmt.t</code></div><div class="doc"></div></div><div class="spec val" id="val-to_string"><a href="#val-to_string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>to_string : ?&#8288;hide:bool <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"></div></div><div class="spec val" id="val-parse_file"><a href="#val-parse_file" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>parse_file : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-parse_lexbuf"><a href="#val-parse_lexbuf" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>parse_lexbuf : Lexing.lexbuf <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-run"><a href="#val-run" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>run : string <span class="keyword">&#8209;&gt;</span> f:(string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string) <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">run n f</code> runs the expect callback <code class="code">f</code> over the file named
<code class="code">n</code>. <code class="code">f</code> is called with the raw contents of <code class="code">n</code> and its structured
contents; it returns the new file contents. If the result of <code class="code">f</code> is
different from the initial contents, then <code class="code">$n.corrected</code> is created
with the new contents.</p></div></div><div class="spec val" id="val-part"><a href="#val-part" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>part : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> option</code></div><div class="doc"><p><code class="code">part i t</code> is the i-th part in <code class="code">t</code>.</p></div></div><div class="spec val" id="val-pp_exit_code"><a href="#val-pp_exit_code" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_exit_code : int Fmt.t</code></div><div class="doc"><p>Display exit code.</p></div></div><div class="spec val" id="val-equal_output"><a href="#val-equal_output" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>equal_output : <a href="index.html#type-output">output</a> list <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-output">output</a> list <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p><code class="code">equal x y</code> compares <code class="code">x</code> and <code class="code">y</code>;  are used as
wildcards for zero, one or multiple matching lines.</p></div></div><div class="spec val" id="val-to_html"><a href="#val-to_html" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>to_html : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"></div></div></body></html>